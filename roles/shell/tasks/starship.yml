---
- name: Install Starship (macOS)
  homebrew:
    name: starship
    state: present
  when: ansible_os_family == "Darwin"

- name: Install Starship (Linux)
  shell: curl -sS https://starship.rs/install.sh | sh -s -- -y
  args:
    executable: /bin/bash
    creates: /usr/local/bin/starship
  become: yes
  when: ansible_os_family == "Debian"

- name: Create Starship config directory
  file:
    path: "{{ config_dir }}"
    state: directory
    mode: '0755'

- name: Copy Starship configuration
  copy:
    src: starship.toml
    dest: "{{ config_dir }}/starship.toml"
    mode: '0644'

- name: Display Starship setup message
  debug:
    msg: |
      âœ… Starship prompt installed!
      
      The custom prompt has been replaced with Starship.
      Configuration file: ~/.config/starship.toml
      
      Customize your prompt: https://starship.rs/config/

