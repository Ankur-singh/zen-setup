---
- name: Include OS-specific Docker tasks
  include_tasks: "{{ ansible_os_family | lower }}.yml"

- name: Check if user is already in docker group
  shell: groups {{ ansible_user_id }} | grep -q docker
  register: user_in_docker_group
  changed_when: false
  failed_when: false

- name: Display docker group message
  debug:
    msg: |
      {% if user_in_docker_group.rc != 0 %}
      ⚠️  You've been added to the docker group.
      You need to log out and log back in for this to take effect.
      Alternatively, run: newgrp docker
      {% else %}
      ✅ User already in docker group
      {% endif %}

